---
'$title': Как кешируются AMP-страницы
$order: 0
description: В этом документе вы узнаете о роли AMP-кеша в экосистеме AMP, а также о том, как происходит кеширование AMP-страниц.
formats:
  - websites
  - stories
  - ads
---

В этом документе вы узнаете о роли AMP-кеша в экосистеме AMP, а также о том, как происходит кеширование AMP-страниц.

## Что такое AMP-кеш?

AMP-кеш — это основанная на проксировании сеть доставки контента (CDN), предоставляющая доступ к корректно сформированным AMP-документам. AMP-кеши рассчитаны на то, чтобы:

1. Выдавать только корректно сформированные AMP-страницы.
2. Способствовать оперативной и безопасной предварительной загрузке AMP-страниц.
3. Дополнительно оптимизировать контент для повышения скорости его отображения на устройстве пользователя.

[tip type="note"] Кеширование не распространяется на AMP-письма. [/tip]

Чтобы узнать подробнее об AMP-кешах, посмотрите видео с YouTube (ниже) или прочитайте статью [Why AMP Caches Exist](https://medium.com/@pbakaus/why-amp-caches-exist-cd7938da2456).

[video src='https://www.youtube.com/watch?v=n8n7fj60lds' caption='Watch this video to learn why AMP Caches exist.']

## Какие существуют AMP-кеши?

На данный момент существует два провайдера услуг AMP-кеширования:

- [Google AMP Cache](https://developers.google.com/amp/cache/)
- [Bing AMP Cache](https://www.bing.com/webmaster/help/bing-amp-cache-bc1c884c)

AMP — открытая экосистема, и AMP Project активно поощряет создание новых AMP-кешей. Чтобы узнать, как это сделать, ознакомьтесь с [рекомендациями по созданию AMP-кешей](https://github.com/ampproject/amphtml/blob/main/docs/spec/amp-cache-guidelines.md).

## Как выбрать AMP-кеш?

Как издатель, вы не выбираете AMP-кеш — его _выбирает платформа_, которая ссылается на ваш контент (если использование кеша в ней предусмотрено).

Такая модель является противоположностью традиционной модели, в которой за доставку контента отвечает издатель; однако она позволяет платформам обеспечивать предсказуемую скорость загрузки страниц, а также требуемую безопасность и конфиденциальность на этапе предварительного рендеринга AMP. Чтобы узнать об обязательных требованиях к AMP-кешам, ознакомьтесь с [рекомендациями по их созданию](https://github.com/ampproject/amphtml/blob/main/docs/spec/amp-cache-guidelines.md).

## Могу ли я отказаться от кеширования?

Кеширование — одна из главных частей экосистемы AMP. Публикация корректно сформированного AMP-документа автоматически делает возможной его доставку через кеш.

Если вы не хотите, чтобы ваш документ кешировался, можно удалить из тега <html> атрибут `amp`. Такой документ формально перестает быть корректным AMP-документом, однако его функциональность остается прежней.

## Кто запрашивает кешированные AMP-страницы?

Доступ к кешированным AMP-страницам осуществляется платформами (такими, как Поиск Google, Google Новости и Bing) и мобильными приложениями. Мобильные приложения могут ссылаться на кешированный AMP-контент по URL-адресу (см. [AMP URL API](https://developers.google.com/amp/cache/use-amp-url) Google), а в случае прогрессивных веб-приложений — с использованием кроссдоменных XHR-запросов (подробнее см. в статье [Использование AMP в качестве источника данных для вашего PWA](../../../../documentation/guides-and-tutorials/integrate/amp-in-pwa.md)).

<amp-img src="/static/img/docs/platforms_accessing_cache.png" width="1054" height="356" layout="responsive" alt="platforms and mobile apps access cached AMP pages"></amp-img>

## Как кешируется моя AMP-страница?

Публикуя контент в формате AMP, вы автоматически разрешаете AMP-кешам кешировать его. Попасть в кеш ваша AMP-страница может следующими способами:

- **Обнаружение платформами**: платформы распознают AMP-контент по тегу `<html ⚡>` или `<html amp>` и кешируют его. Например, бот Поиска Google добавляет индексируемый контент в Google AMP Cache, если распознает его как корректную AMP-страницу.

- **Запрос из кеша по URL-адресу**: платформы могут непосредственно запрашивать AMP-страницы по URL-адресу страницы в кеше. AMP-кеш работает по принципу обратного прокси-сервера, поэтому, когда платформа обращается к странице, страница автоматически кешируется.

  - Пример URL-адреса Google AMP Cache: `https://foo-com.cdn.ampproject.org/c/s/foo.com/amp_document.html`

[tip type="note"] **ПРИМЕЧАНИЕ.** URL-адреса кешированных AMP-страниц не предназначены для того, чтобы пользователи взаимодействовали с ними напрямую, и обычно не используются ими для загрузки контента. [/tip]

- **Добавление издателем**: издатель может вручную добавить AMP-страницу в AMP-кеш. Такая возможность доступна только для Google AMP Cache (см. [Google AMP Cache: обновление AMP-контента](https://developers.google.com/amp/cache/update-cache)).

## Дополнительные ресурсы

- [Рекомендации AMP Project по созданию AMP-кешей](https://github.com/ampproject/amphtml/blob/main/docs/spec/amp-cache-guidelines.md)
- [Общий обзор Google AMP Cache](https://developers.google.com/amp/cache/overview)
- [Документация по Bing AMP Cache](https://www.bing.com/webmaster/help/bing-amp-cache-bc1c884c)
