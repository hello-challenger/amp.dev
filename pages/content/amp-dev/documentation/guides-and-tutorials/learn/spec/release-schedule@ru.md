---
'$title': График выхода релизов AMP
$order: 10
formats:
  - websites
  - email
  - stories
  - ads
teaser:
  text: '- Релизные каналы'
---

<!--
This file is imported from https://github.com/ampproject/amphtml/blob/main/docs/release-schedule.md.
Please do not change this file.
If you have found a bug or an issue please
have a look and request a pull request there.
-->

- [Релизные каналы](#release-channels)
  - [Канал Nightly](#nightly)
  - [Еженедельные каналы](#weekly)
    - [Каналы Experimental и Beta](#beta-and-experimental-channels)
  - [Долгосрочный стабильный канал (lts)](#long-term-stable-lts)
- [Как определить, попало ли ваше изменение в релиз](#determining-if-your-change-is-in-a-release)
- [Периодичность выхода релизов](#release-cadence)
  - [Подробный график](#detailed-schedule)
  - [Заморозка релизов](#release-freezes)

Переход на новый релиз AMP для всех AMP-страниц происходит каждый вторник. **После того как изменение попадает в ветку master, обычно проходит 1–2 недели, прежде чем оно распространится на всех пользователей.**

## Релизные каналы <a name="release-channels"></a>

Среда выполнения AMP и расширения для AMP распространяются по ряду различных _релизных каналов_. Каждый канал служит определенной цели как для разработчиков, так и для самого проекта AMP HTML. Подробнее о том, как и когда код из репозитория [`ampproject/amphtml`](https://github.com/ampproject/amphtml) попадает в релизные сборки, читайте в [разделе о периодичности выхода релизов](#release-cadence).

Определить, вошел ли тот или иной пул-реквест в один из релизных каналов, перечисленных ниже, можно по меткам _PR Use: In Canary_, _PR Use: In Production_ или _PR Use: In LTS_ на GitHub (подробности смотрите в разделе о том, [как определить, попало ли ваше изменение в релиз](#determining-if-your-change-is-in-a-release)).

### Канал Nightly <a name="nightly"></a>

Релизный канал **nightly** обновляется (как следует из названия) вечером каждого буднего дня. Этот процесс автоматизирован, и нет никакой гарантии, что случайно выбранный ночной релиз не будет содержать ошибок и иных проблем. Каждую ночь после полуночи (по тихоокеанскому времени) система выбирает последний из «зеленых» коммитов, сделанных за прошедший день, и использует его в качестве основы для очередного релиза. «Зеленое» состояние сборки означает, что она прошла все автоматизированные тесты.

Ночные релизы позволяют оперативно выявлять и устранять ошибки, чтобы не допустить их попадания в _еженедельные_ релизные каналы, на которые приходится больше трафика. Они также позволяют снизить число пользователей, затрагиваемых новыми ошибками при их появлении.

Вы можете присоединиться к каналу **nightly**, для того чтобы тестировать пул-реквесты, которые были включены в код в течение последних нескольких дней. О том, [как присоединяться к каналам](https://github.com/ampproject/amphtml/blob/main/docs/developing.md#opting-in-to-pre-release-channels), читайте в [DEVELOPING.md].

### Еженедельные каналы <a name="weekly"></a>

_Еженедельные_ релизные каналы — это основные каналы для получения актуальных релизов. Каждую неделю релиз, опубликованный на прошлой неделе на канале **beta**, попадает на канал **stable**, а последний релиз **nightly**, опубликованный на прошлой неделе, попадает на каналы **experimental** и **beta** (см. [подробный график](#detailed-schedule)).

Для создания релизных сборок используются два набора конфигураций сборки: _canary_ и _production_. Сборки для релизных каналов **experimental** и **beta** генерируются на основе одного и того же коммита, но канал **experimental** использует конфигурацию _canary_, тогда как канал **beta** — конфигурацию _production_. Конфигурация _canary_ активирует экспериментальные компоненты и функции, которые могут быть неактивны при сборке с конфигурацией _production_. Присоединиться к каналу **experimental** или **beta** можно на [странице экспериментов](https://cdn.ampproject.org/experiments.html).

Релизный канал **stable** использует конфигурацию сборки _production_, и на него приходится большая часть AMP-трафика. Поскольку релизный канал **beta** также использует конфигурацию сборки _production_, публикуемые на нем сборки идентичны сборкам, которые будут опубликованы на канале **stable** спустя неделю (за исключением изменений, внесенных в последний момент при помощи операции cherry-pick; см. [Внесение кода](https://github.com/ampproject/amphtml/blob/main/docs/contributing-code.md#Cherry-picks)).

#### Каналы Beta и Experimental <a name="beta-and-experimental-channels"></a>

На каналах _Beta_ и _Experimental_ публикуются предварительные сборки, являющиеся кандидатами на роль следующего стабильного релиза AMP. Каждый вторник (за исключением тех недель, когда происходит [заморозка релиза](#release-freezes)) сборка **nightly** за последний день прошедшей недели попадает на каналы **beta** и **experimental** для разработчиков. Если по истечении 1 дня в новой сборке не будет выявлено изменений, негативным образом отражающихся на функциональности и производительности, то в среду мы переводим на новый релиз небольшую часть обычного трафика. Этот же релиз затем попадает на канал **stable** в следующий вторник.

Вы можете присоединиться к одному из этих каналов. О том, [как это сделать](https://github.com/ampproject/amphtml/blob/main/docs/developing.md#opting-in-to-pre-release-channels), читайте в [DEVELOPING.md].

_Канал Beta_ предназначен для того, чтобы:

- экспериментировать с новыми версиями среды выполнения AMP перед их релизом;
- адаптировать сайты для совместимости со следующей версией AMP в рамках процедур контроля качества (QA).

_Канал Experimental_ предназначен для того, чтобы:

- экспериментировать с новыми функциями, которые пока недоступны остальным пользователям;
- адаптировать сайты для работы с новыми функциями AMP, которые еще находятся в разработке, в рамках процедур контроля качества (QA).

Сборки на _канале Experimental_ **могут быть менее стабильными** и содержать функции, которые пока недоступны остальным пользователям.

### Долгосрочный стабильный канал (lts) <a name="long-term-stable-lts"></a>

На релизном канале **lts** публикуются сборки с канала **stable** с интервалом в один месяц. Каждый месяц во второй понедельник актуальная сборка с канала **stable** получает статус **lts**. Этот канал рекомендуется использовать не всем издателям AMP-страниц. Он предоставляется для того, чтобы издатели сайтов могли сократить частоту проверок качества (QA), установив канал **lts** для конкретных веб-страниц (см. <a href="https://github.com/ampproject/amphtml/blob/main/docs/lts-release.md" data-md-type="link">справку по **lts**</a>).

Если второй понедельник месяца является праздничным днем, публикация сборки происходит по окончании [заморозки релиза](#release-freezes).

Важно: издатели, которые выбрали релизный канал **lts**, не смогут использовать недавно добавленные функции. Из-за более длительного релизного цикла сборка на канале **lts** может отставать от текущей (`HEAD`) версии в репозитории [`ampproject/amphtml`](https://github.com/ampproject/amphtml) на срок до семи недель. О том, как узнать о доступности того или иного изменения в рамках выбранного вами релизного цикла, читайте в разделе [Как определить, попало ли ваше изменение в релиз](#determining-if-your-change-is-in-a-release).

## Как определить, попало ли ваше изменение в релиз <a name="determining-if-your-change-is-in-a-release"></a>

[Задачи с _Type: Release_ на GitHub](https://github.com/ampproject/amphtml/labels/Type%3A%20Release) используются для того, чтобы отслеживать состояние текущих и прошлых релизов, начиная с первоначального среза и тестирования на каналах **experimental** и **beta** и заканчивая публикацией на каналах **stable** и **lts**. Анонсы о релизах доступны на [канале #release проекта AMP в Slack](https://amphtml.slack.com/messages/C4NVAR0H3/) ([зарегистрироваться в Slack можно по этой ссылке](https://bit.ly/amp-slack-signup)).

Определить, какие изменения содержит та или иная сборка, можно следующими способами:

- [Задачи с _Type: Release_ на GitHub](https://github.com/ampproject/amphtml/labels/Type%3A%20Release) для каждого релиза содержат ссылку на [страницу соответствующего релиза](https://github.com/ampproject/amphtml/releases) со списком содержащихся в нем изменений.
- Как только пул-реквест попадает в _еженедельную_ сборку или сборку на канале **lts**, ему присваивается метка [_PR Use: In Beta / Experimental_](https://github.com/ampproject/amphtml/issues?q=label%3A%22PR+use%3A+In+Beta+%2F+Experimental%22), [_PR Use: In Stable_](https://github.com/ampproject/amphtml/issues?utf8=%E2%9C%93&q=label%3A%22PR%20use%3A%20In%20Production%22) или [_PR Use: In LTS_](https://github.com/ampproject/amphtml/issues?utf8=%E2%9C%93&q=label%3A%22PR%20use%3A%20In%20LTS%22). Между созданием сборки и присвоением ей метки может пройти какое-то время.

## Периодичность выхода релизов <a name="release-cadence"></a>

Мы намеренно осторожно подходим к расчету периодичности выхода релизов.

Принимая решение о частоте распространения новых версий AMP среди всех пользователей, мы должны учитывать множество факторов, таких как:

- стабильность работы миллионов сайтов и миллиардов страниц, созданных с использованием AMP;
- инвалидация кеша, которая может происходить в результате выпуска новой версии;
- наше стремление оперативно предоставлять доступ к новым функциям.

Взвесив все эти факторы, мы решили, что лучше всего нам подходит одно-двухнедельный релизный цикл. На данный момент это кажется разумным компромиссом, но мы продолжим оценивать эти факторы, и в будущем это решение может быть пересмотрено.

### Подробный график <a name="detailed-schedule"></a>

Мы стараемся как можно точнее следовать этому графику, хотя из-за осложнений могут возникать задержки. Вы можете отслеживать текущее состояние любого релиза при помощи [задач с параметром _Type: Release_ в GitHub](https://github.com/ampproject/amphtml/labels/Type%3A%20Release), а также на [канале #release проекта AMP в Slack](https://amphtml.slack.com/messages/C4NVAR0H3/) ([зарегистрироваться в Slack можно по этой ссылке](https://bit.ly/amp-slack-signup)).

- Вторник, [11:00 по тихоокеанскому времени](https://www.google.com/search?q=11am+pacific+in+current+time+zone): на основе [последней сборки из ветки master, которая проходит все наши тесты](https://travis-ci.org/ampproject/amphtml/branches), создаются новые сборки **experimental** и **beta**, которые затем распространяются среди пользователей AMP, присоединившихся к каналам [Experimental](#beta-and-experimental-channels) и [Beta](#beta-and-experimental-channels) соответственно.
- Среда: мы проверяем отчеты об ошибках от пользователей на каналах _Experimental_ и _Beta_ и, если проблем не обнаружено, активируем сборку **beta** для 1 процента AMP-страниц.
- Четверг — понедельник: мы продолжаем следить за данными о частоте возникновения ошибок и отчетами об ошибках, поступающими от пользователей на каналах _Experimental_ и _Beta_, а также с 1 процента страниц, использующих сборки **experimental** и **beta**.
- Вторник следующей недели: сборка **beta** публикуется на канале **stable** (т. е. все AMP-страницы теперь будут использовать эту сборку).

### Заморозка релизов <a name="release-freezes"></a>

Иногда мы пропускаем выпуск очередного релиза AMP в продакшн — это называется заморозкой релиза.

Если анонсирована однонедельная заморозка релиза, затрагивающая неделю N:

- Релиз, собранный на предыдущей неделе, остается на каналах **experimental**/**beta** в течение еще одной недели; следовательно, релиз, основанный на снимке за неделю N-1, не попадает на канал **stable** на неделе N, как это происходит обычно. Вместо этого он попадет на канал **stable** на неделе N+1.
- Новая релизная сборка _не_ генерируется на неделе, затронутой заморозкой (неделе N).
- Начиная с недели N+1 возобновляется обычный график, т. е. сборки **experimental**/**beta** будут созданы на неделе N+1 и получат статус **stable** на неделе N+2.
- Если релиз **stable**, опубликованный на неделе N-1, изначально должен был получить статус **lts** на неделе N, присвоение ему статуса **lts** откладывается до понедельника недели N+1.
- Релизы **nightly** продолжают генерироваться и публиковаться на других каналах, так как являются полностью автоматизированными.

Заморозка релиза может произойти по следующим причинам:

- Нехватка людей, готовых опубликовать релиз AMP на канале **stable** и отслеживать его состояние. В настоящее время большинство людей, занимающихся релизами AMP, живет в США, поэтому большая часть таких заморозок будет приходиться на недели крупных американских праздников: День независимости (4 июля), День благодарения (четвертый четверг ноября), Рождество (25 декабря) и Новый год (31 декабря / 1 января).
- Чрезвычайная ситуация (например, проблема, затрагивающая безопасность или конфиденциальность), объявленная [Техническим руководящим комитетом (TSC)](https://github.com/ampproject/meta-tsc) или людьми, отвечающими за выпуск релиза.
- Другие ситуации, требующие особенного контроля за стабильностью кодовой базы (по решению TSC).

Во всех случаях, кроме чрезвычайных ситуаций, о заморозке релиза будет объявлено не позднее чем за месяц.

Обратите внимание, что заморозка релиза не подразумевает заморозки кода (если не было объявлено об обратном). Во время заморозки релиза код по-прежнему можно писать, рецензировать и включать в основную ветку.
