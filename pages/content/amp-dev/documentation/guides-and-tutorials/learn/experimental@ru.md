---
'$title': Использование экспериментальных возможностей
$order: 3
description: Экспериментальные компоненты AMP — это уже существующие функции, которые пока не готовы к массовому использованию.
formats:
  - websites
  - stories
  - ads
---

[Экспериментальные компоненты AMP](https://github.com/ampproject/amphtml/tree/main/tools/experiments) – это существующие функции, которые пока не готовы к массовому использованию.

Разработчики и пользователи могут отказаться от них, пока мы не сообщим об окончательной готовности. До этого момента применять экспериментальные компоненты следует с осторожностью, поскольку они могут вызывать ошибки и иногда дают непредсказуемые результаты.

[tip type="important"] Есть риск, что некоторые эксперименты никогда не будут включены в проект AMP. [/tip]

{% set experimental_components = g.docs('/content/amp-dev/documentation/components/reference')|selectattr('experimental')|list %} {% if experimental_components|length %} Ниже приводится список компонентов, которые в настоящее время находятся в экспериментальном статусе и готовы к тестированию разработчиками для получения первых отзывов пользователей:

<ul>{% for component in experimental_components %}<li><a href="{{ component.url.path }}">{{ component.title }}</a></li>{% endfor %}</ul>{% endif %}

## Подключитесь к каналу разработки AMP

Канал AMP Beta Channel обеспечивает поддержку новейших JavaScript-библиотек AMP в браузере.

Версия с канала разработчиков AMP **может быть менее стабильной** и содержать функции, доступные не всем пользователям. Включите эту опцию, если хотите помочь в тестировании новых версий AMP, сообщать об ошибках или создавать документы, для которых требуется новая функция, которая пока недоступна для всех.

Присоединившись к каналу разработчиков, вы сможете:

- тестировать новые функции, которые еще не доступны для всех пользователей, и экспериментировать с ними.
- проводить контроль качества (QA), чтобы обеспечить совместимость вашего сайта со следующей версией AMP.

Если вы обнаружите проблему, которая возникает только в версии AMP для Beta Channel, создайте [задачу](https://github.com/ampproject/amphtml/issues/new) с описанием проблемы. Всегда указывайте URL-адрес страницы, на которой можно воспроизвести проблему.

Чтобы подключить ваш браузер к AMP Beta Channel, перейдите на [страницу экспериментов AMP](https://cdn.ampproject.org/experiments.html) и активируйте эксперимент «AMP Beta Channel». Чтобы получать уведомления о важных или ломающих совместимость изменениях в AMP, подпишитесь на список рассылки [amphtml-announce](https://groups.google.com/forum/#!forum/amphtml-announce).

## Как подключить экспериментальный компонент

#### Компоненты, загружаемые с cdn.ampproject.org

Если контент загружается с `https://*.cdn.ampproject.org`, перейдите на страницу `/experiments.html` в поддомене Google AMP Cache и включите (или отключите) любой экспериментальный компонент с помощью переключателей.

Например, чтобы включить эксперименты с кешированными страницами AMP, источником которых является `www.example.com`, перейдите на `www-example-com.cdn.ampproject.org/experiments.html`.

Статус активации экспериментов сохраняется в `localStorage`; эксперимент активируется только на AMP-страницах, загружаемых с текущего домена.

#### Компоненты, загружаемые с других доменов

Для контента, загружаемого с доменов, не принадлежащих CDN, эксперименты можно включать и выключать с помощью консоли разработчика, используя следующую команду:

```js
AMP.toggleExperiment('experiment');
```

Любой файл AMP, содержащий экспериментальные функции, не пройдет [валидацию AMP](validation-workflow/validate_amp.md). Чтобы получить готовые к рабочему развертыванию документы AMP, удалите экспериментальные компоненты.

## Подключение эксперимента для определенного документа

Документ может самостоятельно активировать определенные эксперименты. Чтобы сделать это, поместите мета-тег с названием `amp-experiments-opt-in` внутри head HTML-документа перед скриптом AMP (`https://cdn.ampproject.org/v0.js`). Значение его атрибута content представляет собой строку идентификаторов экспериментов, разделенных запятыми.

```html
<head>
  ...
  <meta name="amp-experiments-opt-in" content="experiment-a,experiment-b" />
  <!-- The meta tag needs to be placed before the AMP runtime script.-->
  <script async src="https://cdn.ampproject.org/v0.js"></script>
  ...
</head>
```

Таким образом указанные эксперименты будут доступны для всех посетителей документа. Однако не все эксперименты допускают включение на уровне документа. Полный список разрешенных экспериментов см. в атрибуте `allow-doc-opt-in` в файле проекта [`prod-config.json`](https://github.com/ampproject/amphtml/blob/main/build-system/global-configs/prod-config.json). Обратите внимание, что активация компонента на уровне документа может быть отменена на уровне пользователя.

## Испытания на домене разработчика

[Испытания на домене разработчика](https://github.com/GoogleChrome/OriginTrials/blob/gh-pages/explainer.md) позволяют разработчикам использовать экспериментальную функцию в рабочем режиме и предоставлять важнейшую обратную связь.

Традиционно функция в экспериментальном режиме может использоваться в разработке, но не может переноситься в производство. Испытания на домене разработчика позволяют заинтересованным разработчикам принять участие в тестировании экспериментальной функции в производственной среде с учетом следующих нюансов:

- Тестирование ограничено по времени.
- После данных испытаний в тестируемую функцию, скорее всего, будут внесены изменения.

Испытания на домене разработчика дают возможность внедрять новую функцию и пользоваться ей еще до того, как она будет выпущена официально. Функция будет существовать на сайте разработчика, а не в виде защищенного эксперимента; обратная связь может напрямую влиять на направление разработки функции.

{% set trial_components = g.docs ('/content/amp-dev/documentation/components/reference') | selectattr ('origin_trial') | list%} {% if trial_components | length%} В настоящее время испытание на домене разработчика можно выполнять для следующих компонентов:

<ul>{% for component in trial_components %}<li><a href="{{ component.url.path }}">{{ component.title }}</a></li>{% endfor %}</ul>{% endif %}

### Как начать испытание на домене разработчика

На каждой странице, где будет использоваться эксперимент на домене разработчика, разместите следующий тег `<meta>` внутри `<head>`:

```html
<meta name="amp-experiment-token" content="{copy your token here}" />
```

Примечание. `"amp-experiment-token"` — это буквальная строка `"amp-experiment-token"`, а не сам токен (который указывается в атрибуте content) и не имя эксперимента.
